---
layout: post
title: Deadzones em controles analógicos e remoção de ruído
date: '2013-11-21T11:58:00.000-03:00'
author: Murilo Pontes
tags:
- ruído
- sensor
- controle
- noise
- analógico
- deadzone
modified_time: '2015-01-18T13:32:05.307-03:00'
thumbnail: http://4.bp.blogspot.com/-2VFeBpUYQQM/Uo4Zh8psMkI/AAAAAAAAnYQ/tWwPXbJ45Q4/s72-c/axial-deadzone.jpg
blogger_id: tag:blogger.com,1999:blog-3047384083282566923.post-8098729055550011567
blogger_orig_url: http://dronespersonalizados.blogspot.com/2013/11/deadzones-em-controles-analogicos-e.html
---

<br />Encontrei um ótimo post sobre o assunto, que vai direto ao ponto e compara as abordagens existentes.<br />http://www.third-helix.com/2013/04/doing-thumbstick-dead-zones-right/<br /><br /><a name='more'></a><br /><br /><h2>Deadzones</h2><div>Para quem ainda não conhecem, permita-me uma simples introdução.</div><div>Deadzone é a área que deve ser ignorada por conta do ruído que existe naturalmente nos controles e sensores analógicos. &nbsp;</div><h2>abordagem simplista&nbsp;</h2><pre class="brush:c#">float deadzone = 0.25f;<br /></pre><pre class="brush:c#">Vector2 stickInput = new Vector2(Input.GetAxis(“Horizontal”), Input.GetAxis(“Vertical”));</pre><pre class="brush:c#">if(Mathf.Abs(stickInput.x) &lt; deadzone)<br />    stickInput.x = 0.0f;<br />if(Mathf.Abs(stickInput.y) &lt; deadzone)<br />    stickInput.y = 0.0f;<br /><br /></pre><table align="center" cellpadding="0" cellspacing="0" class="tr-caption-container" style="margin-left: auto; margin-right: auto; text-align: center;"><tbody><tr><td style="text-align: center;"><a href="http://4.bp.blogspot.com/-2VFeBpUYQQM/Uo4Zh8psMkI/AAAAAAAAnYQ/tWwPXbJ45Q4/s1600/axial-deadzone.jpg" imageanchor="1" style="margin-left: auto; margin-right: auto;"><img border="0" src="http://4.bp.blogspot.com/-2VFeBpUYQQM/Uo4Zh8psMkI/AAAAAAAAnYQ/tWwPXbJ45Q4/s200/axial-deadzone.jpg" height="200" width="200" /></a></td></tr><tr><td class="tr-caption" style="text-align: center;">O controle/sensor fica como se estive frouxo / falhando.<br />Essa é a solução natural que a maioria dá quando vê o problema pela primeira vez.</td></tr></tbody></table><h2></h2><h2>abordagem radial</h2><pre class="brush:c#">float deadzone = 0.25f;<br />Vector2 stickInput = new Vector2(Input.GetAxis(“Horizontal”), Input.GetAxis(“Vertical”));<br />if(stickInput.magnitude &lt; deadzone)<br />    stickInput = Vector2.zero;<br /><br /></pre><table align="center" cellpadding="0" cellspacing="0" class="tr-caption-container" style="margin-left: auto; margin-right: auto; text-align: center;"><tbody><tr><td style="text-align: center;"><a href="http://4.bp.blogspot.com/-ABHs6_nzLlU/Uo4bgnhvJdI/AAAAAAAAnYc/2qh7ir1wl8Y/s1600/radial-deadzone.jpg" imageanchor="1" style="margin-left: auto; margin-right: auto;"><img border="0" src="http://4.bp.blogspot.com/-ABHs6_nzLlU/Uo4bgnhvJdI/AAAAAAAAnYc/2qh7ir1wl8Y/s200/radial-deadzone.jpg" height="200" width="200" /></a></td></tr><tr><td class="tr-caption" style="text-align: center;">Essa solução já é visivelmente melhor que a primeira,<br />no caso de um joystick com manche analógico (com os 2 do xbox360) somente<br />a área circular central &nbsp;vai ser ignorada como ruído.<br />Só que ainda existe um problema, o ruído não existe apenas na posição central do controle/sensor.</td></tr></tbody></table><pre class="brush:c#"></pre><h2>abordagem radial escalar normalizada</h2><pre class="brush:c#">float deadzone = 0.25f;<br />Vector2 stickInput = new Vector2(Input.GetAxis(“Horizontal”), Input.GetAxis(“Vertical”));</pre><pre class="brush:c#">if(stickInput.magnitude &lt; deadzone)<br />    stickInput = Vector2.zero;<br />else<br />    stickInput = stickInput.normalized * ((stickInput.magnitude - deadzone) / (1 - deadzone));<br /><br /></pre><table align="center" cellpadding="0" cellspacing="0" class="tr-caption-container" style="margin-left: auto; margin-right: auto; text-align: center;"><tbody><tr><td style="text-align: center;"><a href="http://1.bp.blogspot.com/-w7s1w_0C4tU/Uo4dTqYGK9I/AAAAAAAAnYo/rRDTtBf4fHE/s1600/scaled-radial-deadzone.jpg" imageanchor="1" style="margin-left: auto; margin-right: auto;"><img border="0" src="http://1.bp.blogspot.com/-w7s1w_0C4tU/Uo4dTqYGK9I/AAAAAAAAnYo/rRDTtBf4fHE/s200/scaled-radial-deadzone.jpg" height="200" width="200" /></a></td></tr><tr><td class="tr-caption" style="text-align: center;">Essa solução resolve o problema que restava, da solução anterior.<br />O ruído é filtrado de maneira proporcional ao afastamento do centro.</td></tr></tbody></table><br /><br /><div>Tudo isso se aplica tanto a controles (manches do xbox360), bem como, sensores (praticamente todos do drone).</div><div><br /></div>